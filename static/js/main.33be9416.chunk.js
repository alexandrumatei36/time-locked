(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{135:function(e,t,n){},142:function(e,t){},149:function(e,t){},159:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(17),i=n.n(s),c=(n(135),n(4)),u=n.n(c),o=n(27),p=n(18),d=n(11),l=r.a.createContext({address:"",connect:function(){},chainId:"",ethereum:void 0});function y(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(""),c=Object(p.a)(i,2),y=c[0],b=c[1],m=Object(a.useState)(),f=Object(p.a)(m,2),j=f[0],h=f[1];function O(){return(O=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.enable();case 2:t=e.sent,s(t[0]),b(j.chainId),localStorage.setItem("account",t[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=window.ethereum;e&&(e.on("accountsChanged",(function(e){r!==e[0]&&(s(e[0]),localStorage.setItem("account",e[0]))})),e.on("disconnect",(function(){s(""),localStorage.removeItem("account")})),e.on("chainChanged",(function(e){b(e)})),h(e))}),[]),Object(a.useEffect)((function(){j&&function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("account")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,j.enable();case 4:t=e.sent,s(t[0]),b(j.chainId);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[j]),Object(d.jsx)(l.Provider,{value:{address:r,connect:function(){return O.apply(this,arguments)},chainId:y,ethereum:j},children:e.children})}var b=n(109),m=n(202),f=n(214),j=n(194),h=n(198),O=n(199),x=n(200);function v(){var e=Object(a.useContext)(l),t=e.address,n=e.connect;e.chainId;function r(){return(r=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsx)(j.a,{position:"static",children:Object(d.jsxs)(h.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(d.jsx)(O.a,{variant:"h6",children:"TimeLocked"}),Object(d.jsx)("span",{children:t?"".concat(t.slice(0,10),"....").concat(t.slice(30,t.length)):Object(d.jsx)(x.a,{color:"inherit",onClick:function(e){return r.apply(this,arguments)},children:"Connect wallet"})})]})})}var w=n(110),T=n(211),g=n(216),k=n(213),S=n(207),C=n(21),M=n(209),E=n(108),I=n(23),A=[{inputs:[{internalType:"uint256",name:"supply",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"},{internalType:"uint256",name:"supply",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],W=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"tokenAddress",type:"address"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"address",name:"unlocker",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"unlockTimestamp",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"deposits",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"unlockTimestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarderAddress",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"forwarderAddress",type:"address"}],name:"setForwarder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],F="0xc7847fe3B3427c0f5AeFd6df17a3ED6E7668C3cc";function J(e){var t=Object(a.useContext)(l).address,n=Object(a.useState)(""),r=Object(p.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)(!1),y=Object(p.a)(c,2),b=y[0],f=y[1],j=Object(a.useState)(!1),h=Object(p.a)(j,2),v=h[0],J=h[1],L=Object(a.useState)(new Date),N=Object(p.a)(L,2),P=N[0],B=N[1],z=Object(a.useState)(!1),D=Object(p.a)(z,2),V=D[0],R=D[1],U=Object(a.useState)("10"),q=Object(p.a)(U,2),G=q[0],H=q[1],K=Object(a.useState)(""),Q=Object(p.a)(K,2),X=Q[0],Y=Q[1];function Z(){return(Z=Object(o.a)(u.a.mark((function e(){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!s){e.next=7;break}return n=new I.a.providers.Web3Provider(window.ethereum),a=new I.a.Contract(s,A,n),e.next=5,a.allowance(t,F);case 5:r=e.sent,R("0"!==r.toString());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(o.a)(u.a.mark((function n(){var a,r,i,c,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!t||!s){n.next=13;break}return J(!0),a=new I.a.providers.Web3Provider(window.ethereum),r=a.getSigner(),i=new I.a.Contract(s,A,a),c=I.a.BigNumber.from(2).pow(256).sub(1).toString(),n.next=9,i.connect(r).approve(F,c);case 9:return o=n.sent,n.next=12,o.wait();case 12:J(!1);case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(0),e.onError("Failed to approve tokens"),J(!1);case 19:case"end":return n.stop()}}),n,null,[[0,15]])})))).apply(this,arguments)}function _(){return(_=Object(o.a)(u.a.mark((function t(){var n,a,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(!0),n=new I.a.providers.Web3Provider(window.ethereum),a=n.getSigner(),r=new I.a.Contract(F,W,n),t.next=7,r.connect(a).deposit(s,X,I.a.utils.parseEther(G),Math.floor(P.getTime()/1e3));case 7:return i=t.sent,t.next=10,i.wait();case 10:f(!1),Y(""),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),f(!1),e.onError("Failed to lock tokens");case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){Z.apply(this,arguments)}()}),[t,s]),Object(d.jsxs)(w.a,{elevation:1,style:{padding:"16px 0 32px",marginBottom:32},children:[Object(d.jsx)(m.a,{children:Object(d.jsx)(O.a,{variant:"h6",children:"Lock funds"})}),Object(d.jsxs)(m.a,{children:[Object(d.jsx)(T.a,{fullWidth:!0,label:"Token",value:s,onChange:function(e){i(e.target.value)},variant:"outlined",children:e.tokens.map((function(e){return Object(d.jsx)(g.a,{value:e.address,children:e.symbol},e.address)}))}),Object(d.jsx)(k.a,{fullWidth:!0,label:"Tokens amount",variant:"outlined",style:{margin:"24px 0"},value:G,onChange:function(e){H(e.target.value)}}),Object(d.jsx)(k.a,{fullWidth:!0,label:"Claimer address",variant:"outlined",style:{margin:"0 0 24px"},value:X,onChange:function(e){Y(e.target.value)}}),Object(d.jsx)(C.a,{utils:E.a,children:Object(d.jsx)(M.a,{label:"Select unlock date",inputVariant:"outlined",value:P,onChange:function(e){B(e)}})})]}),s&&t&&X&&Object(d.jsxs)(m.a,{style:{margin:"24px 0 0"},children:[!V&&Object(d.jsxs)(x.a,{disabled:v,color:"inherit",variant:"outlined",onClick:function(){return $.apply(this,arguments)},style:{marginRight:16},children:["Enable",v&&Object(d.jsx)(S.a,{size:16,style:{marginLeft:8}})]}),V&&Object(d.jsxs)(x.a,{disabled:b,color:"inherit",variant:"outlined",onClick:function(){return _.apply(this,arguments)},children:["Lock funds",b&&Object(d.jsx)(S.a,{size:16,style:{marginLeft:8}})]})]})]})}var L=n(212),N="0xc7847fe3B3427c0f5AeFd6df17a3ED6E7668C3cc";function P(e){var t=Object(a.useContext)(l).address,n=Object(a.useState)(""),r=Object(p.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)(!1),y=Object(p.a)(c,2),b=y[0],f=y[1],j=Object(a.useState)(""),h=Object(p.a)(j,2),v=h[0],k=h[1];function C(){return(C=Object(o.a)(u.a.mark((function e(){var n,a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!s){e.next=8;break}return n=new I.a.providers.Web3Provider(window.ethereum),a=n.getSigner(),r=new I.a.Contract(N,W,n),e.next=6,r.connect(a).deposits(t,s);case 6:i=e.sent,k(I.a.utils.formatEther(i.amount.toString()));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(o.a)(u.a.mark((function t(){var n,a,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(!0),n=new I.a.providers.Web3Provider(window.ethereum),a=n.getSigner(),r=new I.a.Contract(N,W,n),t.next=7,r.connect(a).claim(s);case 7:return i=t.sent,t.next=10,i.wait();case 10:f(!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),f(!1),e.onError("Failed to unlock tokens");case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){C.apply(this,arguments)}()}),[t,s]),Object(d.jsxs)(w.a,{elevation:1,style:{padding:"16px 0 32px"},children:[Object(d.jsx)(m.a,{children:Object(d.jsx)(O.a,{variant:"h6",children:"Claim funds ".concat(v||"")})}),Object(d.jsxs)(m.a,{children:[Object(d.jsx)(T.a,{fullWidth:!0,label:"Token",value:s,onChange:function(e){i(e.target.value)},variant:"outlined",children:e.tokens.map((function(e){return Object(d.jsx)(g.a,{value:e.address,children:e.symbol},e.address)}))}),!!v&&Object(d.jsxs)(x.a,{disabled:b,style:{margin:"24px 0 0"},color:"inherit",variant:"outlined",onClick:function(){return M.apply(this,arguments)},children:["Unlock funds",b&&Object(d.jsx)(S.a,{size:16,style:{marginLeft:8}})]})]})]})}var B=n(208),z=n(69);function D(e){var t=localStorage.getItem("tokens");if(t){var n=JSON.parse(t);n=[].concat(Object(z.a)(n),[e]),localStorage.setItem("tokens",JSON.stringify(n))}else localStorage.setItem("tokens",JSON.stringify([e]))}function V(){var e=localStorage.getItem("tokens");return e?JSON.parse(e):[]}function R(e){var t=localStorage.getItem("tokens");return!!t&&JSON.parse(t).filter((function(t){return t.address===e})).length>0}function U(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!1),c=Object(p.a)(i,2),y=c[0],b=c[1],f=Object(a.useContext)(l).ethereum;function j(){return(j=Object(o.a)(u.a.mark((function t(n){var a,i,c,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r){t.next=3;break}return t.abrupt("return");case 3:if(!R(r)){t.next=6;break}return e.onError("Token already added"),t.abrupt("return");case 6:return t.prev=6,b(!0),a=new I.a.providers.Web3Provider(f),i=new I.a.Contract(r,A,a),t.next=12,i.symbol();case 12:return c=t.sent,t.next=15,i.decimals();case 15:o=t.sent,D({address:r,decimals:o,symbol:c}),b(!1),s(""),e.onAddToken(),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(6),b(!1),e.onError("Failed to add token");case 26:case"end":return t.stop()}}),t,null,[[6,22]])})))).apply(this,arguments)}return Object(d.jsx)(w.a,{style:{padding:"16px 0 24px",marginBottom:32},children:Object(d.jsxs)(m.a,{children:[Object(d.jsx)(O.a,{variant:"h6",children:"Add custom token"}),Object(d.jsx)("form",{onSubmit:function(e){return j.apply(this,arguments)},children:Object(d.jsxs)(B.a,{container:!0,spacing:2,children:[Object(d.jsx)(B.a,{item:!0,xs:8,children:Object(d.jsx)(k.a,{label:"Token address",variant:"outlined",fullWidth:!0,size:"small",value:r,onChange:function(e){s(e.currentTarget.value)}})}),Object(d.jsx)(B.a,{item:!0,xs:4,children:Object(d.jsxs)(x.a,{color:"inherit",variant:"outlined",fullWidth:!0,style:{height:"100%"},type:"submit",disabled:y,children:["Add token",y&&Object(d.jsx)(S.a,{size:16,style:{marginLeft:8}})]})})]})})]})})}function q(e){return Object(d.jsx)(L.a,Object(b.a)({elevation:6,variant:"filled"},e))}function G(){var e=Object(a.useContext)(l),t=e.ethereum,n=(e.chainId,Object(a.useState)("")),r=Object(p.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)([]),u=Object(p.a)(c,2),o=u[0],y=u[1];function b(e){i(e),setTimeout((function(){i("")}),2e3)}return Object(a.useEffect)((function(){y(V())}),[]),t?Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(v,{}),Object(d.jsxs)(m.a,{maxWidth:"sm",style:{padding:"32px 0"},children:[Object(d.jsx)(f.a,{open:!!s,children:Object(d.jsx)(q,{severity:"error",children:s})}),Object(d.jsx)(U,{onAddToken:function(){y(V())},onError:b}),Object(d.jsx)(J,{tokens:o,onError:b}),Object(d.jsx)(P,{tokens:o,onError:b})]})]}):null}var H=function(){return Object(d.jsx)(y,{children:Object(d.jsx)(G,{})})};i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(H,{})}),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.33be9416.chunk.js.map